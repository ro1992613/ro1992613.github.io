webpackJsonp([5],{"+msr":function(t,e){},Hr4m:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=a("I4FZ"),n=a.n(s),r=(a("n2nY"),"cyp20190111-1251525641"),l=new COS({SecretId:"AKID2qOioeydrqa5LMkEn6AzYsNddMtBsfXB",SecretKey:"Z6OVO1PYT9cqsxqUu6FApHbfU4PVheLo"}),c={data:function(){return{inputStatus:{type:!1,category:!1,title:!1},title:"",content:"",select_categry_list:[],inputdata:{type:"",category:""},public_categry_list:[],private_categry_list:[]}},methods:{initUser:function(){var t=window.localStorage.getItem("user");if(!t||t!=this.sysuser){var e=window.prompt("提示","输入密码吧！");e!=this.sysuser?this.$router.push({path:"/"}):window.localStorage.setItem("user",e)}},saveEditorContent:function(){var t=this,e={Bucket:r,Region:"ap-chengdu"};if(t.$data.inputdata.type&&t.$data.inputdata.category){var a=t.$data.inputdata.type+"/";a=a+t.$data.inputdata.category+"/",a+=t.$data.title,e.Key=a,e.Body=t.$data.content,l.putObject(e,function(e,a){console.log(e||a),e?t.$message(e):(t.$message("新增成功"),t.$router.push({path:"/menu/tx_list"}))})}},initMyEditor:function(){var t={Bucket:r,Region:"ap-chengdu"};if(this.$route.query.key){t.Key=this.$route.query.key;var e=this.$route.query.type;this.$data.select_categry_list="private"==e?this.$data.private_categry_list:this.$data.public_categry_list,this.$data.inputdata.type=e,this.$data.inputdata.category=this.$route.query.category,this.$data.title=this.$route.query.title,this.$data.inputStatus.type=!0,this.$data.inputStatus.category=!0,this.$data.inputStatus.title=!0,l.getObject(t,function(t,e){t?console.log(t):i.txt.html(e.Body)})}},getcategoryList:function(){var t=this,e={Bucket:r,Region:"ap-chengdu"};l.getBucket(e,function(e,a){var i=[],s=[];e?console.log(e):a.Contents.map(function(t){var e=t.Key;e.endsWith("/")?e.indexOf("public/")>=0?(e=e.replace("public/","")).indexOf("/")>=0&&i.push({category:e.substring(0,e.indexOf("/"))}):e.indexOf("private/")>=0&&(e=e.replace("private/","")).indexOf("/")>=0&&s.push({category:e.substring(0,e.indexOf("/"))}):e=""}),t.$data.public_categry_list=i,t.$data.private_categry_list=s,t.select_categry_list=i,t.$data.inputdata.type="public",t.initMyEditor()})},typeChange:function(){"private"==this.$data.inputdata.type?this.$data.select_categry_list=this.$data.private_categry_list:(this.$data.inputdata.type="public",this.$data.select_categry_list=this.$data.public_categry_list)}},computed:{},mounted:function(){var t=this;this.initUser(),t.getcategoryList(),(i=new n.a("#editorElem")).customConfig.uploadImgShowBase64=!0,i.customConfig.onchange=function(e){t.$data.content=e},i.create()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-edit"},[t._v("新增博客")])])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{disabled:t.inputStatus.type,placeholder:"请选择类型"},on:{change:t.typeChange},model:{value:t.inputdata.type,callback:function(e){t.$set(t.inputdata,"type",e)},expression:"inputdata.type"}},[a("el-option",{attrs:{label:"公共",value:"public"}}),t._v(" "),a("el-option",{attrs:{label:"私有",value:"private"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{disabled:t.inputStatus.category,placeholder:"请选择"},model:{value:t.inputdata.category,callback:function(e){t.$set(t.inputdata,"category",e)},expression:"inputdata.category"}},t._l(t.select_categry_list,function(t){return a("el-option",{key:t.category,attrs:{label:t.category,value:t.category}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{disabled:t.inputStatus.title,placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"min-height":"100%","margin-bottom":"10px"}},[a("div",{staticStyle:{"text-align":"left"},attrs:{id:"editorElem"}})]),t._v(" "),a("div",[a("el-button",{staticStyle:{float:"left","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.saveEditorContent}},[t._v("保存\n      "),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)])},staticRenderFns:[]};var u=a("SZvu")(c,o,!1,function(t){a("+msr")},null,null);e.default=u.exports}});
//# sourceMappingURL=5.a60b018e22abbe6ac445.js.map