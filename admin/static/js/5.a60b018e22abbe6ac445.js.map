{"version":3,"sources":["webpack:///src/page/index/tx/tx_editor.vue","webpack:///./src/page/index/tx/tx_editor.vue?b6f7","webpack:///./src/page/index/tx/tx_editor.vue"],"names":["editor","Bucket","cos","COS","SecretId","SecretKey","tx_editor","data","inputStatus","type","category","title","content","select_categry_list","inputdata","public_categry_list","private_categry_list","methods","initUser","user","window","localStorage","getItem","this","sysuser","tempuser","prompt","$router","push","path","setItem","saveEditorContent","thisv","params","Region","$data","key","Key","Body","putObject","err","console","log","$message","initMyEditor","$route","query","getObject","txt","html","getcategoryList","this_v","getBucket","public_rs","private_rs","Contents","map","v","endsWith","indexOf","replace","substring","typeChange","computed","mounted","wangEditor_default","a","customConfig","uploadImgShowBase64","onchange","create","tx_tx_editor","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","text-align","attrs","slot","_v","margin-bottom","span","disabled","placeholder","on","change","model","value","callback","$$v","$set","expression","label","_l","item","min-height","id","float","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.a60b018e22abbe6ac445.js","sourcesContent":["<template>\r\n  <el-card class=\"box-card\">\r\n    <div slot=\"header\" style=\"text-align:left\" class=\"clearfix\">\r\n      <span>\r\n        <i class=\"el-icon-edit\">新增博客</i>\r\n      </span>\r\n    </div>\r\n    <div style=\"margin-bottom:10px;\">\r\n      <el-row>\r\n        <el-col :span=\"4\">\r\n          <el-select :disabled=\"inputStatus.type\" v-model=\"inputdata.type\" @change=\"typeChange\" placeholder=\"请选择类型\">\r\n            <el-option label=\"公共\" value=\"public\"></el-option>\r\n            <el-option label=\"私有\" value=\"private\"></el-option>\r\n          </el-select>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-select :disabled=\"inputStatus.category\" v-model=\"inputdata.category\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in select_categry_list\"\r\n              :key=\"item.category\"\r\n              :label=\"item.category\"\r\n              :value=\"item.category\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-col>\r\n        <el-col :span=\"16\">\r\n          <el-input :disabled=\"inputStatus.title\" v-model=\"title\" placeholder=\"请输入标题\"></el-input>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <br>\r\n    <div style=\"min-height: 100%;margin-bottom:10px;\">\r\n      <div id=\"editorElem\" style=\"text-align:left\"></div>\r\n    </div>\r\n    <div>\r\n      <el-button\r\n        style=\"float: left;margin-bottom:10px;\"\r\n        type=\"primary\"\r\n        @click=\"saveEditorContent\"\r\n      >保存\r\n        <i class=\"el-icon-upload el-icon--right\"></i>\r\n      </el-button>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n<style>\r\n.box-card {\r\n  min-height: 98%;\r\n}\r\n.quill-editor {\r\n  min-height: 700px;\r\n}\r\n.ql-container {\r\n  min-height: 600px;\r\n}\r\n</style>\r\n<script>\r\nimport E from \"wangeditor\";\r\nimport \"./cos-js-sdk-v5.min.js\";\r\nvar editor;\r\nvar Bucket = \"cyp20190111-1251525641\";\r\nvar Region = \"ap-chengdu\";\r\nvar cos = new COS({\r\n  SecretId: \"AKID2qOioeydrqa5LMkEn6AzYsNddMtBsfXB\",\r\n  SecretKey: \"Z6OVO1PYT9cqsxqUu6FApHbfU4PVheLo\"\r\n});\r\nexport default {\r\n  data() {\r\n    return {\r\n      inputStatus:{\r\n        type:false,\r\n        category:false,\r\n        title:false\r\n      },\r\n      title: \"\",\r\n      content: \"\",\r\n      select_categry_list: [],\r\n      inputdata: {\r\n        type: \"\",\r\n        category: \"\"\r\n      },\r\n      public_categry_list: [],\r\n      private_categry_list: []\r\n    };\r\n  },\r\n  methods: {\r\n    initUser(){\r\n      var user = window.localStorage.getItem(\"user\");\r\n      if(user && user == this.sysuser){\r\n        return;\r\n      }else {\r\n        var tempuser=window.prompt(\"提示\",\"输入密码吧！\");\r\n        if(tempuser==this.sysuser){\r\n          window.localStorage.setItem(\"user\",tempuser);\r\n          return;\r\n        }else{\r\n          this.$router.push({path:\"/\"});\r\n        }\r\n      }\r\n    },\r\n    saveEditorContent() {\r\n      var thisv = this;\r\n      var params = {\r\n        Bucket: Bucket /* 必须 */,\r\n        Region: Region /* 必须 */\r\n      };\r\n\r\n      if (thisv.$data.inputdata.type && thisv.$data.inputdata.category) {\r\n        var key = thisv.$data.inputdata.type + \"/\";\r\n        key = key + thisv.$data.inputdata.category + \"/\";\r\n        key = key + thisv.$data.title;\r\n        params.Key = key;\r\n        params.Body = thisv.$data.content;\r\n        cos.putObject(params, function(err, data) {\r\n          console.log(err || data);\r\n          if(err){\r\n              thisv.$message(err);\r\n          }else{\r\n              thisv.$message(\"新增成功\");\r\n            thisv.$router.push({path:\"/menu/tx_list\"});\r\n          }\r\n        });\r\n      }\r\n    },\r\n    initMyEditor(){\r\n      var params = {\r\n        Bucket: Bucket /* 必须 */,\r\n        Region: Region /* 必须 */\r\n      };\r\n      if(this.$route.query.key){\r\n        params.Key=this.$route.query.key;\r\n        let type=this.$route.query.type;\r\n        if(type==\"private\"){\r\n          this.$data.select_categry_list = this.$data.private_categry_list;\r\n        }else{\r\n          this.$data.select_categry_list = this.$data.public_categry_list;\r\n        }\r\n        this.$data.inputdata.type = type;\r\n        this.$data.inputdata.category =this.$route.query.category;\r\n        this.$data.title=this.$route.query.title;\r\n\r\n        this.$data.inputStatus.type=true;\r\n        this.$data.inputStatus.category=true;\r\n        this.$data.inputStatus.title=true;\r\n        cos.getObject(params, function(err, data) {\r\n            if(err) {\r\n                console.log(err);\r\n            } else {\r\n                editor.txt.html(data.Body);\r\n            }\r\n        });\r\n       \r\n      }\r\n    },\r\n    getcategoryList() {\r\n      var this_v = this;\r\n      var params = {\r\n        Bucket: Bucket /* 必须 */,\r\n        Region: Region /* 必须 */\r\n      };\r\n      cos.getBucket(params, function(err, data) {\r\n        let public_rs = [];\r\n        let private_rs = [];\r\n        if (err) {\r\n          console.log(err);\r\n        } else {\r\n          data.Contents.map(v => {\r\n            let key = v.Key;\r\n            if (!key.endsWith(\"/\")) {\r\n              key = \"\";\r\n            } else {\r\n              if (key.indexOf(\"public/\") >= 0) {\r\n                key = key.replace(\"public/\", \"\");\r\n                if (key.indexOf(\"/\") >= 0) {\r\n                  public_rs.push({\r\n                    category: key.substring(0, key.indexOf(\"/\"))\r\n                  });\r\n                }\r\n              } else if (key.indexOf(\"private/\") >= 0) {\r\n                key = key.replace(\"private/\", \"\");\r\n                if (key.indexOf(\"/\") >= 0) {\r\n                  private_rs.push({\r\n                    category: key.substring(0, key.indexOf(\"/\"))\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n        this_v.$data.public_categry_list = public_rs;\r\n        this_v.$data.private_categry_list = private_rs;\r\n        this_v.select_categry_list = public_rs;\r\n        this_v.$data.inputdata.type = \"public\";\r\n        this_v.initMyEditor();\r\n      });\r\n    },\r\n    typeChange() {\r\n      var this_v = this;\r\n      if (this_v.$data.inputdata.type == \"private\") {\r\n        this_v.$data.select_categry_list = this_v.$data.private_categry_list;\r\n      } else {\r\n        this_v.$data.inputdata.type = \"public\";\r\n        this_v.$data.select_categry_list = this_v.$data.public_categry_list;\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  mounted() {\r\n    var v = this;\r\n    this.initUser();\r\n    v.getcategoryList();\r\n    editor = new E(\"#editorElem\");\r\n    editor.customConfig.uploadImgShowBase64 = true;\r\n    editor.customConfig.onchange = html => {\r\n      v.$data.content = html;\r\n    };\r\n    editor.create();\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/index/tx/tx_editor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",staticStyle:{\"text-align\":\"left\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_c('i',{staticClass:\"el-icon-edit\"},[_vm._v(\"新增博客\")])])]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('el-select',{attrs:{\"disabled\":_vm.inputStatus.type,\"placeholder\":\"请选择类型\"},on:{\"change\":_vm.typeChange},model:{value:(_vm.inputdata.type),callback:function ($$v) {_vm.$set(_vm.inputdata, \"type\", $$v)},expression:\"inputdata.type\"}},[_c('el-option',{attrs:{\"label\":\"公共\",\"value\":\"public\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"私有\",\"value\":\"private\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-select',{attrs:{\"disabled\":_vm.inputStatus.category,\"placeholder\":\"请选择\"},model:{value:(_vm.inputdata.category),callback:function ($$v) {_vm.$set(_vm.inputdata, \"category\", $$v)},expression:\"inputdata.category\"}},_vm._l((_vm.select_categry_list),function(item){return _c('el-option',{key:item.category,attrs:{\"label\":item.category,\"value\":item.category}})}),1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":16}},[_c('el-input',{attrs:{\"disabled\":_vm.inputStatus.title,\"placeholder\":\"请输入标题\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1)],1)],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{staticStyle:{\"min-height\":\"100%\",\"margin-bottom\":\"10px\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"},attrs:{\"id\":\"editorElem\"}})]),_vm._v(\" \"),_c('div',[_c('el-button',{staticStyle:{\"float\":\"left\",\"margin-bottom\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveEditorContent}},[_vm._v(\"保存\\n      \"),_c('i',{staticClass:\"el-icon-upload el-icon--right\"})])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/._vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-259dc94a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/._vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/page/index/tx/tx_editor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/._extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-259dc94a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./tx_editor.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./tx_editor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./tx_editor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-259dc94a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./tx_editor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/index/tx/tx_editor.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}