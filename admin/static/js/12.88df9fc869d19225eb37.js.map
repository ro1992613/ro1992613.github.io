{"version":3,"sources":["webpack:///src/page/index/tx/tx_category.vue","webpack:///./src/page/index/tx/tx_category.vue?138f","webpack:///./src/page/index/tx/tx_category.vue"],"names":["Bucket","cos","COS","SecretId","SecretKey","tx_category","data","dialogFormVisible","category_list","inputdata","type","category","methods","initUser","user","window","localStorage","getItem","this","sysuser","tempuser","prompt","$router","push","path","setItem","deleteCategory","row","thisv","deleteObject","Region","Key","key","err","$message","getList","addCategory","$data","putObject","Body","this_v","params","getBucket","rs","console","log","Contents","map","v","endsWith","el","indexOf","replace","substring","computed","mounted","tx_tx_category","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","staticStyle","float","padding","on","click","$event","width","index","indexMethod","label","align","prop","scopedSlots","_u","fn","scope","size","title","visible","update:visible","placeholder","model","value","callback","$$v","$set","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/12.88df9fc869d19225eb37.js","sourcesContent":["<template>\r\n  <el-card class=\"box-card\">\r\n    <div slot=\"header\" class=\"clearfix\">\r\n      <span>目录</span>\r\n      <el-button\r\n        @click=\"dialogFormVisible = true\"\r\n        style=\"float: right; padding: 3px 0\"\r\n        type=\"text\"\r\n      >新增</el-button>\r\n    </div>\r\n    <el-table :data=\"category_list\" style=\"width: 100%\">\r\n      <el-table-column type=\"index\" :index=\"indexMethod\" label=\"序号\" width=\"50\"></el-table-column>\r\n      <el-table-column align=\"center\" prop=\"type\" label=\"类型\"></el-table-column>\r\n      <el-table-column align=\"center\" prop=\"category\" label=\"目录\"></el-table-column>\r\n      <el-table-column align=\"center\" prop=\"key\" label=\"键值\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"deleteCategory(scope.row)\" type=\"text\" size=\"small\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog title=\"收货地址\" :visible.sync=\"dialogFormVisible\">\r\n      \r\n      <el-input v-model=\"inputdata.category\" placeholder=\"请输入目录名称\">\r\n          <el-select slot=\"prepend\" style=\"width:150px;\" v-model=\"inputdata.type\" placeholder=\"请选择类型\">\r\n            <el-option label=\"公共\" value=\"public\"></el-option>\r\n            <el-option label=\"私有\" value=\"private\"></el-option>\r\n            </el-select>\r\n      </el-input>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addCategory\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-card>\r\n</template>\r\n<script>\r\nimport \"./cos-js-sdk-v5.min.js\";\r\nvar Bucket = \"cyp20190111-1251525641\";\r\nvar Region = \"ap-chengdu\";\r\nvar cos = new COS({\r\n  SecretId: \"AKID2qOioeydrqa5LMkEn6AzYsNddMtBsfXB\",\r\n  SecretKey: \"Z6OVO1PYT9cqsxqUu6FApHbfU4PVheLo\"\r\n});\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogFormVisible: false,\r\n      category_list: [],\r\n      inputdata: {\r\n        type: \"\",\r\n        category: \"\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    initUser(){\r\n      var user = window.localStorage.getItem(\"user\");\r\n      if(user && user == this.sysuser){\r\n        return;\r\n      }else {\r\n        var tempuser=window.prompt(\"提示\",\"输入密码吧！\");\r\n        if(tempuser==this.sysuser){\r\n          window.localStorage.setItem(\"user\",tempuser);\r\n          return;\r\n        }else{\r\n          this.$router.push({path:\"/\"});\r\n        }\r\n      }\r\n    },\r\n    deleteCategory(row) {\r\n      var thisv = this;\r\n      cos.deleteObject(\r\n        {\r\n          Bucket: Bucket /* 必须 */,\r\n          Region: Region /* 必须 */,\r\n          Key: row.key /* 必须 */\r\n        },\r\n        function(err, data) {\r\n          if (err) {\r\n            thisv.$message(err);\r\n          } else {\r\n            thisv.$message(\"删除成功\");\r\n            thisv.getList();\r\n          }\r\n        }\r\n      );\r\n    },\r\n    addCategory() {\r\n      var thisv = this;\r\n      if (thisv.$data.inputdata.type && thisv.$data.inputdata.category) {\r\n        var key = thisv.$data.inputdata.type + \"/\";\r\n        key = key + thisv.$data.inputdata.category + \"/\";\r\n        cos.putObject(\r\n          {\r\n            Bucket: Bucket /* 必须 */,\r\n            Region: Region /* 必须 */,\r\n            Key: key /* 必须 */,\r\n            Body: \"\"\r\n          },\r\n          function(err, data) {\r\n            if (err) {\r\n              thisv.$message(err);\r\n            } else {\r\n              thisv.$message(\"添加成功\");\r\n              thisv.$data.dialogFormVisible = false;\r\n              thisv.$data.inputdata.type = \"\";\r\n              thisv.$data.inputdata.category = \"\";\r\n              thisv.getList();\r\n            }\r\n          }\r\n        );\r\n      } else {\r\n        this.$message(\"数据不完整\");\r\n      }\r\n    },\r\n    getList() {\r\n      this.initUser();\r\n      var this_v = this;\r\n      var params = {\r\n        Bucket: Bucket /* 必须 */,\r\n        Region: Region /* 必须 */\r\n      };\r\n      cos.getBucket(params, function(err, data) {\r\n        let rs = [];\r\n        if (err) {\r\n          console.log(err);\r\n        } else {\r\n          data.Contents.map(v => {\r\n            let key = v.Key;\r\n            if(!key.endsWith(\"/\")){\r\n                key=\"\";\r\n            }\r\n            let el = {};\r\n            el.key = key;\r\n            if (key.indexOf(\"public/\") >= 0) {\r\n              key = key.replace(\"public/\", \"\");\r\n              el.type = \"公共\";\r\n              if (key.indexOf(\"/\") >= 0) {\r\n                el.category = key.substring(0, key.indexOf(\"/\"));\r\n                rs.push(el);\r\n              }\r\n            } else if (key.indexOf(\"private/\") >= 0) {\r\n              key = key.replace(\"private/\", \"\");\r\n              el.type = \"私有\";\r\n              if (key.indexOf(\"/\") >= 0) {\r\n                el.category = key.substring(0, key.indexOf(\"/\"));\r\n                rs.push(el);\r\n              }\r\n            }\r\n          });\r\n        }\r\n        this_v.$data.category_list = rs;\r\n      });\r\n    }\r\n  },\r\n  computed: {},\r\n  mounted() {\r\n    this.getList();\r\n  }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/index/tx/tx_category.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"目录\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.category_list}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"index\":_vm.indexMethod,\"label\":\"序号\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"type\",\"label\":\"类型\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"category\",\"label\":\"目录\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"key\",\"label\":\"键值\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.deleteCategory(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"收货地址\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-input',{attrs:{\"placeholder\":\"请输入目录名称\"},model:{value:(_vm.inputdata.category),callback:function ($$v) {_vm.$set(_vm.inputdata, \"category\", $$v)},expression:\"inputdata.category\"}},[_c('el-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"slot\":\"prepend\",\"placeholder\":\"请选择类型\"},slot:\"prepend\",model:{value:(_vm.inputdata.type),callback:function ($$v) {_vm.$set(_vm.inputdata, \"type\", $$v)},expression:\"inputdata.type\"}},[_c('el-option',{attrs:{\"label\":\"公共\",\"value\":\"public\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"私有\",\"value\":\"private\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addCategory}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/._vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-fbc20eca\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/._vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/page/index/tx/tx_category.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./tx_category.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./tx_category.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fbc20eca\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/._vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./tx_category.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/index/tx/tx_category.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}