webpackJsonp([12],{stIN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("n2nY");var i="cyp20190111-1251525641",l=new COS({SecretId:"AKID2qOioeydrqa5LMkEn6AzYsNddMtBsfXB",SecretKey:"Z6OVO1PYT9cqsxqUu6FApHbfU4PVheLo"}),n={data:function(){return{dialogFormVisible:!1,category_list:[],inputdata:{type:"",category:""}}},methods:{initUser:function(){var t=window.localStorage.getItem("user");if(!t||t!=this.sysuser){var e=window.prompt("提示","输入密码吧！");e!=this.sysuser?this.$router.push({path:"/"}):window.localStorage.setItem("user",e)}},deleteCategory:function(t){var e=this;l.deleteObject({Bucket:i,Region:"ap-chengdu",Key:t.key},function(t,a){t?e.$message(t):(e.$message("删除成功"),e.getList())})},addCategory:function(){var t=this;if(t.$data.inputdata.type&&t.$data.inputdata.category){var e=t.$data.inputdata.type+"/";e=e+t.$data.inputdata.category+"/",l.putObject({Bucket:i,Region:"ap-chengdu",Key:e,Body:""},function(e,a){e?t.$message(e):(t.$message("添加成功"),t.$data.dialogFormVisible=!1,t.$data.inputdata.type="",t.$data.inputdata.category="",t.getList())})}else this.$message("数据不完整")},getList:function(){this.initUser();var t=this,e={Bucket:i,Region:"ap-chengdu"};l.getBucket(e,function(e,a){var i=[];e?console.log(e):a.Contents.map(function(t){var e=t.Key;e.endsWith("/")||(e="");var a={};a.key=e,e.indexOf("public/")>=0?(e=e.replace("public/",""),a.type="公共",e.indexOf("/")>=0&&(a.category=e.substring(0,e.indexOf("/")),i.push(a))):e.indexOf("private/")>=0&&(e=e.replace("private/",""),a.type="私有",e.indexOf("/")>=0&&(a.category=e.substring(0,e.indexOf("/")),i.push(a)))}),t.$data.category_list=i})}},computed:{},mounted:function(){this.getList()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("目录")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.category_list}},[a("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"type",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"category",label:"目录"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"key",label:"键值"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteCategory(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"收货地址",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-input",{attrs:{placeholder:"请输入目录名称"},model:{value:t.inputdata.category,callback:function(e){t.$set(t.inputdata,"category",e)},expression:"inputdata.category"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"请选择类型"},slot:"prepend",model:{value:t.inputdata.type,callback:function(e){t.$set(t.inputdata,"type",e)},expression:"inputdata.type"}},[a("el-option",{attrs:{label:"公共",value:"public"}}),t._v(" "),a("el-option",{attrs:{label:"私有",value:"private"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addCategory}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},s=a("VU/8")(n,o,!1,null,null,null);e.default=s.exports}});
//# sourceMappingURL=12.91bf29c58b3888502cd0.js.map