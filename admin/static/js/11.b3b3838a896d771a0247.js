webpackJsonp([11],{Y1yS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("n2nY");var a="cyp20190111-1251525641",i=new COS({SecretId:"AKID2qOioeydrqa5LMkEn6AzYsNddMtBsfXB",SecretKey:"Z6OVO1PYT9cqsxqUu6FApHbfU4PVheLo"}),r={data:function(){return{category_list:[],inputdata:{type:"",category:""}}},methods:{initUser:function(){var t=window.localStorage.getItem("user");if(!t||t!=this.sysuser){var e=window.prompt("提示","输入密码吧！");e!=this.sysuser?this.$router.push({path:"/"}):window.localStorage.setItem("user",e)}},deleteCategory:function(t){var e=this;i.deleteObject({Bucket:a,Region:"ap-chengdu",Key:t.key},function(t,n){t?e.$message(t):(e.$message("删除成功"),e.getList())})},addText:function(){this.$router.push({path:"/menu/tx_editor"})},editText:function(t){this.$router.push({path:"/menu/tx_editor",query:{key:t.key,category:t.category,type:t.type,title:t.title}})},getList:function(){var t=this,e={Bucket:a,Region:"ap-chengdu"};i.getBucket(e,function(e,n){var a=[];e?console.log(e):n.Contents.map(function(t){var e=t.Key;e.endsWith("/")&&(e="");var n={};n.key=e,e.indexOf("public/")>=0?(e=e.replace("public/",""),n.type="public",n.typeName="公共",e.indexOf("/")>=0&&(n.category=e.substring(0,e.indexOf("/")),n.title=e.substring(e.indexOf("/")+1,e.length),a.push(n))):e.indexOf("private/")>=0&&(e=e.replace("private/",""),n.type="private",n.typeName="私有",e.indexOf("/")>=0&&(n.category=e.substring(0,e.indexOf("/")),n.title=e.substring(e.indexOf("/")+1,e.length),a.push(n)))}),t.$data.category_list=a})}},computed:{},mounted:function(){this.initUser(),this.getList()}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("文章列表")]),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.addText}},[t._v("新增")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.category_list}},[n("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"typeName",label:"类型"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"category",label:"目录"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"title",label:"标题"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.deleteCategory(e.row)}}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.editText(e.row)}}},[t._v("编辑")])]}}])})],1)],1)},staticRenderFns:[]},s=n("VU/8")(r,l,!1,null,null,null);e.default=s.exports}});
//# sourceMappingURL=11.b3b3838a896d771a0247.js.map